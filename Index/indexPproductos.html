<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../Style/nav.css">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">


  <link rel="stylesheet" href="../Style/styleProductos.css">
  <title>Tienda</title>
</head>
<header id="navbar"></header>

<body>
  <!-- Filtro -->
  <div class="container1">
    <div class="row">
      <!-- Filtros (20% ancho) -->
      <div class="col-md-3">
        <div id="filter-section">
          <div id="filter-header">
            <h4>Filtrar por:</h4>
            <i id="clearFilters" class="fa-solid fa-trash"></i>
          </div>
          <!-- Categorías con botón de minimizar -->
          <h5>
            Categorías
            <span id="toggleCategories" style="cursor: pointer; float: right;">[-]</span>
          </h5>
          <div id="categoryFilter">
            <div><input type="checkbox" value="GPS"> GPS</div>
            <div><input type="checkbox" value="Accesorios"> Accesorios</div>
            <div><input type="checkbox" value="Microfonos"> Micrófonos</div>
            <div><input type="checkbox" value="Camaras"> Cámaras</div>
          </div>

          <!-- Filtro por precio con opción de deselección -->
          <h5>Rango de precios</h5>
          <div id="priceFilter">
            <div><input type="radio" name="price" value="0-100000"> 0 - 100,000</div>
            <div><input type="radio" name="price" value="100000-300000"> 100,000 - 300,000</div>
            <div><input type="radio" name="price" value="300000-500000"> 300,000 - 500,000</div>
            <div><input type="radio" name="price" value="500000-1000000"> 500,000 - 1,000,000</div>
          </div>

          <!-- Filtro por activo -->
          <h5>Tipo de Activo</h5>
          <div id="activoFilter">
            <div><input type="checkbox" value="Carga"> Carga</div>
            <div><input type="checkbox" value="Carro"> Carro</div>
            <div><input type="checkbox" value="Moto"> Moto</div>
            <div><input type="checkbox" value="Camion"> Camión</div>
          </div>

          <button id="applyFilters" class="btn btn-primary mt-2">Aplicar</button>

        </div>
      </div>

      <!-- Contenido de productos (80% ancho) -->
      <div class="col-md-9">
        <div id="sort-section">
          <label for="sortBy">Ordenar por:</label>
          <select id="sortBy" class="form-select">
            <option value="">Seleccionar</option>
            <option value="lowToHigh">Precio: Menor a Mayor</option>
            <option value="highToLow">Precio: Mayor a Menor</option>
          </select>
        </div>

        <div id="contenedorTodosProductos" class="row">
          <div class="col">
            <div id="list-items" class="row">
              <!-- Tarjetas de productos -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- cierre filtro -->
  <div class="container2">
    <div id="contenedorTodosProductos" class="row">
      <div class="col">
        <div id="list-items" class="row">
          <!-- Las tarjetas se agregarán aquí dinámicamente -->
        </div>
      </div>
    </div>
    <!-- Modal Carrito -->
    <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="cartModalLabel">Carrito de Compras</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" id="cartItemsContainer">
            <!-- Los productos del carrito se cargarán aquí dinámicamente -->
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            <button type="button" class="btn btn-primary" id="checkoutButton">Ir al carrito</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
  <script src="../Script/scriptPproductos.js"></script>

  <header id="footer"></header>

  <!-- Este es el script solo para cargar el navbar -->
  <script>
    fetch('nav.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('navbar').innerHTML = data;
      })
      .catch(error => console.error('Error al cargar el navbar:', error));
  </script>


  <!-- cargar footer -->
  <script>

    fetch('footer.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('footer').innerHTML = data;
      })
      .catch(error => console.error('Error al cargar el footer:', error));


    document.addEventListener("DOMContentLoaded", () => {
      const productos = JSON.parse(localStorage.getItem("productos"));
      if (productos) {
        cargarProductos(productos, "#contenedorTodosProductos");
      } else {
        console.error("No hay productos en localStorage.");
      }
    });

  </script>
</body>

</html>